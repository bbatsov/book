<html style="" lang="en" class="js flexbox fontface"><head><meta charset="utf-8"><meta content="width=device-width, initial-scale=1.0" name="viewport"><title>Real World OCaml</title><link href="css/app.css" rel="stylesheet"><link href="css/prism.css" rel="stylesheet"><script src="js/min/modernizr-min.js"></script><script src="js/prism.js"></script><script src="//use.typekit.net/gfj8wez.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><div class="title-bar"><div class="title"><h1>Real World OCaml</h1><h5>2<sup>nd</sup> Edition (published in Q4 2021)</h5><nav><a href="index.html">Home</a><a href="toc.html">Table of Contents</a><a href="faqs.html">FAQs</a><a href="install.html">Install</a><a href="https://ocaml.janestreet.com/ocaml-core/">API Docs</a></nav></div></div><div class="wrap"><div class="left-column"></div><article class="main-body">  <h1>Installation Instructions</h1>

  <p>These instructions are aimed at readers of Real World OCaml,
  though much of what you find here will be useful for anyone who
  wants to get a good working OCaml installation.</p>

  <p>At the highest level, here's what you need to do:</p>

  <ul>
    <li><a href="#installing-opam">Install opam</a>, OCaml's default
      package manager</li>

    <li><a href="#opam-setup">Set up opam</a>, which means
      initializing opam and then installing the version of OCaml
      you'll need, along with the libraries and tools that will help
      you work through the examples in the book</li>

    <li><a href="#utop-setup">Configure utop</a>, the interactive
      toplevel that will be the primary vehicle we'll use for walking
      through small examples.</li>

    <li><a href="#editor-setup">Set up your editing environment.</a>
    We have pointers for a few editors, including Visual Studio Code,
    Emacs, and Vi</li>
  </ul>

  <p>Note that Windows is not fully supported by the examples in Real
  World OCaml or by opam, though it's being worked on.  Until that's
  ready, we recommend using a virtual machine running Debian Linux on
  your local machine
  through <a href="https://docs.microsoft.com/en-us/windows/wsl/install">WSL2</a>,
  or
  <a href="https://docker.com">Docker for Windows</a>.</p>

  <p>Let's get started.</p>

  <h2 id="installing-opam">Installing opam</h2>

  <p>The easiest way to install opam is through your OS's package
  manager. </p>

  <p>Here
    are <a href="http://opam.ocaml.org/doc/Install.html#Using-your-distribution-39-s-package-system">
    platform-specific installation instructions</a> for installing via
    your package manager.  The same page
    has <a href="http://opam.ocaml.org/doc/Install.html#Binary-distribution">
    instructions for using a binary installer</a> if you have trouble
    with your package manager.
</p>

  <h2 id="#opam-setup">Setting up opam</h2>

  <h3>Run <code>opam init</code></h3>

  <p>Initialize the opam package database by running:</p>

  <pre data-host="lama" data-user="rwo" class="command-line"><code class="language-bash">
opam init</code></pre>

  <p><code>opam init</code> will ask you if you want it to adjust some
  of the config files for your shell.  We recommend you say yes here
  so as to automate adjusting the PATH environment variable of your
  shell and to prepare your environment in other ways.</p>

  <p>If for whatever reason your shell is not set up properly, you can
    put it in the right state by running:</p>

    <pre data-host="lama" data-user="rwo" class="command-line"><code class="language-bash">
eval $(opam env)</code></pre>

  <p>This <em>only</em> works with your current shell and it can only
  be automated for future shells by adding the line to your login
  scripts (which is exactly what opam offers to do for you
  in <code>opam init</code>). </p>

  <p>You can check if your environment is set up properly by
  running <code>opam switch</code> with no arguments.  It will emit
  a warning if your shell is not set up correctly, along with
  instructions on how to fix it.</p>
  <pre data-output="2-7" data-host="lama" data-user="rwo" class="command-line"><code class="language-bash">
opam switch
#  switch                            compiler                    description
â†’  default                           ocaml-base-compiler.4.09.1  default

[WARNING] The environment is not in sync with the current switch.
          You should run: eval $(opam env)
</code></pre>

  <h3>Installing the right compiler</h3>

  <p>Real World OCaml requires OCaml 4.13.1.  You can use <code>opam
      switch</code> to see which version of OCaml you have installed.
      If, as shown in the above invocation of switch, you have an
      older version installed, you can use opam to install a more
      up-to-date version:</p>
  <pre data-host="lama" data-user="rwo" class="command-line"><code class="language-bash">
opam switch create 4.13.1
eval $(opam env)
</code></pre>

  <p>The <code>opam switch create</code> will take a few minutes on a
  modern machine, and will download and install the new compiler and
  all libraries associated with it.</p>

  <h3>Installing libraries and tools</h3>

  <p>Finally, we're ready to install the libraries and tools we'll
  need for the book. The two important ones are <code>base</code>,
  which provides the standard library that all the examples in the
  book are based on, and <code>utop</code>, which is the
  interactive toplevel that you can use for working through the
  examples.  We can install them as follows. </p>
  <pre data-host="lama" data-user="rwo" class="command-line">    <code class="language-bash">
opam install base core utop
</code></pre>

  <p>Other packages will come up in the book, but you can install them
  when you need them.</p>

  <p>Next, change your <code>~/.ocamlinit</code> file to match the
  following:</p>

  <pre><code class="language-ocaml">
#require "core.top";;
#require "ppx_jane";;
open Base;;
</code></pre>

  <p> This will open the Base standard library and set up some useful
  pretty-printers and syntax extensions. Notice that <code>#</code> is
  used to mark a toplevel directive, not a comment.</p>

  <h2 id="editor-setup">Editor set-up</h2>

  <h3>Visual Studio Code</h3>

  <p>We recommend
  the <a href="https://marketplace.visualstudio.com/items?itemName=ocamllabs.ocaml-platform">OCaml
  Platform plug-in</a>.  You'll also need an OCaml
  Language-Server-Protocol server, which you can install via opam
  following
  these <a href="https://github.com/ocaml/ocaml-lsp#installation">instructions</a>.</p>

  <h3>Emacs</h3>

  <p>opam comes with a <code>user-setup</code> package that can be used
  to install Emacs configs.  You can install it as follows, along with
  some related packages.</p>

  <pre data-host="lama" data-user="rwo" class="command-line"><code class="language-bash">
opam install user-setup tuareg ocamlformat merlin
opam user-setup install</code></pre>

  
  <p><code>user-setup</code> doesn't support <code>ocamlformat</code>
  yet, but here
  are <a href="https://github.com/ocaml-ppx/ocamlformat#emacs-setup">instructions
  for setting up ocamlformat for emacs</a>.</p>

  <h3>Vim</h3>

  <p>Vim users can use the built-in style for handling OCaml source
  code.  Beyond that, Merlin and other associated tools can be
  installed as follows. </p>

  <pre data-host="lama" data-user="rwo" class="command-line"><code class="language-bash">
opam install user-setup merlin ocamlformat
opam user-setup install</code></pre>

  
  <p><code>user-setup</code> doesn't support ocamlformat yet, but here
  are <a href="https://github.com/ocaml-ppx/ocamlformat#vim-setup">instructions
  for setting up ocamlformat for VIM</a>.</p>
</article></div><footer><div class="content"><ul><li><a href="http://twitter.com/realworldocaml">@realworldocaml</a></li><li><a href="http://twitter.com/yminsky">@yminsky</a></li><li><a href="http://twitter.com/avsm">@avsm</a></li><li><a href="https://github.com/realworldocaml">GitHub</a></li><li><a href="http://www.goodreads.com/book/show/16087552-real-world-ocaml">goodreads</a></li></ul><p>Copyright 2012-2022 Anil Madhavapeddy and Yaron Minsky.</p></div></footer><script src="js/jquery.min.js"></script><script src="js/min/app-min.js"></script></body></html>